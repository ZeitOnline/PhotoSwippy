const e=e=>Array.prototype.slice.call(e),t=(e,o)=>e&&(o(e)?e:t(e.parentNode,o)),o=(e,t,o)=>{const n=new Image;n.onload=()=>t(n),o&&(n.onerror=()=>o(n)),n.src=e},n=(e,t)=>(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector).call(e,t),r=Object.assign||function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const t=Object(e);for(let e=1;e<arguments.length;e++){const o=arguments[e];if(null!=o)for(const e in o)o.hasOwnProperty(e)&&(t[e]=o[e])}return t};let s,i,p,l,a=0,c={};const d={indexSelector:null,itemSelector:"a",captionSelector:"figcaption",hoverPreload:!1,useMsrc:!0,eventListener:[]},w=(e,t,n)=>{n=n||e.items[t].el.querySelector("img")||{offsetWidth:0,offsetHeight:0};const p=r({},e.options,{index:t,getThumbBoundsFn(t){const o=e.items[t].el.offsetParent?e.items[t].el:n;if(o.offsetParent){const e=window.pageYOffset||document.documentElement.scrollTop,t=o.getBoundingClientRect();return{x:t.left,y:t.top+e,w:t.width}}}}),a=new s(l,i,e.items,p);a.listen("gettingData",(e,t)=>{t.w&&t.h||(t.w=n.offsetWidth,t.h=n.offsetHeight,p.hoverPreload&&t.preloadState||o(t.src,e=>{t.w=e.width,t.h=e.height,a.updateSize(!0)}))}),a.options.eventListener.forEach(e=>{a.listen(e.name,e.callback())}),a.init()},h=(l,d)=>{if(s&&i||console.error('[PhotoSwippy] PhotoSwipe and PhotoSwipeUI libraries were not found. Was "PhotoSwippy.init()" called?'),!l)return;("string"==typeof l?e(document.querySelectorAll(l)):[l]).forEach(s=>{if(!s.photoswippy){a++;const i=((s,i={})=>{if(s.dataset.pswpOptions)i=JSON.parse(s.dataset.pswpOptions);else{const e=Object.keys(s.dataset).filter(e=>0===e.indexOf("pswp")&&"pswp"!==e);e.length>0&&e.forEach(e=>{const t=e[4].toLowerCase()+e.substring(5);i[t]=s.dataset[e]||!0})}const l=r({galleryUID:s.dataset.pswpId||s.dataset.pswp||`gallery-${a}`},p,i);s.dataset.pswp=l.galleryUID;const c=e(s.querySelectorAll(l.itemSelector)).map(e=>{const t=e.querySelector(l.captionSelector)||{},[n,r]=(e.dataset.pswpSize||"").toLowerCase().split("x").map(parseInt),s=e.dataset.pswpSrc||e.href,i={el:e,src:s,w:n||e.dataset.pswpWidth||0,h:r||e.dataset.pswpHeight||0,title:e.dataset.pswpCaption||t.innerHTML||""};if(l.useMsrc){const t=e.querySelector("img");t&&(i.msrc=t.src)}return l.hoverPreload&&e.addEventListener("mouseover",function t(n){i.preloadState||(i.preloadState=1,o(s,o=>{i.preloadState=2,i.w=o.width,i.h=o.height,e.removeEventListener("mouseover",t)},()=>{i.preloadState=0,e.removeEventListener("mouseover",t)}))}),i}),d={el:s,options:l,items:c};return s.addEventListener("click",(e=>o=>{o.preventDefault();const r=t(o.target,t=>1===t.nodeType&&n(t,e.options.itemSelector));if(!r)return;const s=(e=>{let t=0;for(;e=e.previousElementSibling;)++t;return t})(t(r,"string"==typeof e.options.indexSelector?t=>n(t,e.options.indexSelector):t=>t.parentNode===e.el));w(e,s,r)})(d)),d})(s,d);s.photoswippy=!0,c[i.options.galleryUID]=i}});const h=window.location.hash.substring(1).split("&").reduce((e,t)=>{if(t.length){const[o,n]=t.split("=");e[o]=n}return e},{});h.pid&&h.gid&&c[h.gid]&&w(c[h.gid],h.pid-1,null),u()},u=()=>{e(document.querySelectorAll("[data-pswp-trigger]")).forEach(e=>{e.photoswippy||(e.photoswippy=!0,e.addEventListener("click",function(){const[e,t=0]=this.dataset.pswpTrigger.split("@"),o=c[e];o?w(o,parseInt(t),this):console.error(`[PhotoSwippy] Gallery with id '${e}' not found.`)}))})};var f={init:(e=window.PhotoSwipe,t=window.PhotoSwipeUI_Default,o)=>{s=e,i=t,p=r(d,o),l=document.querySelector(".pswp"),l||console.error("[PhotoSwippy] Photoswipe template (Element with .pswp class) not found."),h("[data-pswp]")},build:h};export default f;
//# sourceMappingURL=photoswippy.modern.js.map
